<div class="title-index">
  <div class="title-inner">
    <h1>Upcoming Events</h1>
  </div>
</div>
<div data-controller="toggle">
  <div class="toggle-button-container">
    <%= button_tag 'Map', type: 'button', class: 'toggle-button', data: { action: "click->toggle#toggleEventsList" } %>
    <span class="svg-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" aria-hidden="true" role="presentation" focusable="false" style="display: block; height: 16px; width: 16px; fill: var(--f-mkcy-f);"><path d="M31.25 3.75a2.29 2.29 0 0 0-1.01-1.44A2.29 2.29 0 0 0 28.5 2L21 3.67l-10-2L2.5 3.56A2.29 2.29 0 0 0 .7 5.8v21.95a2.28 2.28 0 0 0 1.06 1.94A2.29 2.29 0 0 0 3.5 30L11 28.33l10 2 8.49-1.89a2.29 2.29 0 0 0 1.8-2.24V4.25a2.3 2.3 0 0 0-.06-.5zM12.5 25.98l-1.51-.3L9.5 26H9.5V4.66l1.51-.33 1.49.3v21.34zm10 1.36-1.51.33-1.49-.3V6.02l1.51.3L22.5 6h.01v21.34z"></path></svg></span>
  </div>

  <div data-controller="map"
      data-map-markers-value="<%= @markers.to_json %>"
      data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"
      class="index-wrapper">

    <div id="events-map" style="width: 100%; height: 90vh;" data-toggle-target="map">
    </div>
    <div id="info-panel" class="info-panel hidden" data-map-target="infoPanel">
      <button type="button" data-action="click->map#closeInfoPanel">Close</button>
    </div>
  </div>
  <div class="events-dynamic-container">
    <div class="event-list d-none" data-toggle-target="list">
      <div class="events-container">
        <% @events.each do |event| %>
          <div class="event-card">
            <%= image_tag "photo1.jpg", class:"d-block w-100" %>
            <h2><%= event.name %></h2>
            <% if event.garden %>
            <p><span class="event-atribute">Location</span> <%= event.garden.name %></p>
            <% end %>
            <p>Date: <%= event.date.strftime('%B %d, %Y') %></p>
            <p><%= truncate(event.description, length: 100) %></p>
          </div>
          <% end %>
      </div>
    </div>
  </div>
  </div>
